---
title: "coaching_analysis"
output: html_document
---

---
title: "Coaching Networks and Career Pathways Analysis"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
library(tidyverse)
library(igraph)
library(ggraph)
library(tidygraph)
library(lubridate)
```

# Overview

This analysis explores coaching networks and career pathways in NCAA women's basketball, focusing on which schools produce future head coaches and identifying coaching "trees."

Your Task: Work through each section, making decisions and identifying potential story angles from the data.

---

# Data Loading

Load the CSV file and check out the data to see what you're working with.

```{r load-data}
coaching <- read_csv("https://raw.githubusercontent.com/dwillis/wbb/refs/heads/main/ncaa/coaches/coaching_histories_merged.csv")

cat("\nDataset summary:\n")
cat("Total records:", nrow(coaching), "\n")
cat("Unique coaches:", n_distinct(coaching$coach), "\n")
cat("Unique schools:", n_distinct(coaching$college), "\n")
cat("Division I records:", sum(coaching$division == "I", na.rm = TRUE), "\n")
```

---

# Analysis 1: Head Coach Production Pipeline

## DECISION POINT 1: Defining "Future Head Coaches"

**Question for you**: Should we focus only on coaches who became D1 head coaches, or also include those who became head coaches at D2, D3, or other levels? How does this choice affect the story? Does it matter if someone became a D3 head coach vs. stayed in D1 as an assistant?

I can easily see stories based on either path. It would be interesting to consider which coaches choose a head coaching job at the D3 or D2 level over a job as a D1 assistant (I suspect not many). That being said, I think this data is already really extensive and can be a bit messy solely focusing on the D1 level and in many ways comparing D1 to 2 and 3 can be like comparing apples to oranges with discrepancies in resources NIL, restrictions etc. 

For those reasons, and the fact that I'm most interested in what progresses you to the highest level of coaching at D1 I am going to stick with what we have now and keep it limited to D1 head coaches. 

**Your choice** (modify the code below):

```{r head-coach-pipeline}
# STUDENT DECISION: Modify this filter as needed
# Option A: Only D1 head coaches (current setting)
# Option B: All NCAA head coaches (remove division filter)
# Option C: D1 + D2 only (division %in% c("I", "II"))

d1_head_coaches <- coaching |>
  filter(division == "I", position_title_standardized == "Head Coach") |>  # MODIFY THIS LINE
  distinct(coach) |>
  pull(coach)

cat("Number of head coaches identified:", length(d1_head_coaches), "\n")
```


## Finding Previous Positions

```{r previous-positions}
# Find their previous positions (before becoming head coach)
future_hc_positions <- coaching |>
  filter(coach %in% d1_head_coaches, position_title_standardized != 'Head Coach') |>
  arrange(coach, start_year) |>
  group_by(coach) |>
  mutate(
    is_head_coach = position_title_standardized == "Head Coach",
    first_hc_year = min(start_year[is_head_coach], na.rm = TRUE),
    before_hc = start_year < first_hc_year | is.na(first_hc_year)
  ) |>
  ungroup() 

cat("Total positions held by future head coaches:", nrow(future_hc_positions), "\n")
```

## DECISION POINT 2: Which Division Matters for Training?

**Question for you**: When looking at which schools produce future head coaches, should we only count their D1 experience, or also their D2/D3/other experience?

In this case I think we should include all divisions. As I wrote above I'm interested in the coaches who have reached the highest level of WBB coaching and the path those coaches followed to get there, so if that includes a D2 or D3 then I think that owuld be interesting to know. It would be especially cool if there was a D2/D3/JuCo that had churned out multiple D1 head coaches, and I think that could be a cool feature on its own.

```{r production-schools}
# STUDENT DECISION: Modify the division filter
# Current: Only counting D1 positions
# Alternative: Remove division filter to count all positions

hc_production_schools <- future_hc_positions |>
  group_by(college_clean, position_title_standardized) |>
  summarize(
    future_hcs = n_distinct(coach),
    .groups = "drop"
  ) |>
  arrange(desc(future_hcs))

cat("\nTop 20 D1 schools producing future head coaches (all positions):\n")
hc_production_schools |>
  group_by(college_clean) |>
  summarize(total_future_hcs = sum(future_hcs), .groups = "drop") |>
  arrange(desc(total_future_hcs)) |>
  head(20) |>
  print(n = 20)
```

**Think about**: Does a stint at a D3 school early in someone's career "count" as part of their development?

## Position Type Breakdown

```{r position-breakdown}
cat("\n\nTop schools by position type:\n")
hc_production_schools |>
  filter(position_title_standardized %in% c("Assistant Coach", "Associate Head Coach")) |>
  group_by(position_title_standardized) |>
  slice_max(future_hcs, n = 10) |>
  arrange(position_title_standardized, desc(future_hcs))
```

### ðŸ’¡ STORY IDEAS - Section 1

**Based on what you see above, brainstorm 2-3 story angles:**

1. What's going on at East Carolina? Why is it a factory for eventual head coaches?
2. Why do certain schools like Penn State and Wake Forest produce a high quantity of head coaches, but haven't found that much success. Are they not promoting the right assistants? Do they just have strong connections to mid-majors for another reason.
3. 

**Questions to consider:**
- Which school dominates the list? Is this surprising?
- Are there mid-major schools punching above their weight?
- Are there regional patterns?

---

# Analysis 2: Career Ladder Analysis

## DECISION POINT 3: Minimum Position Threshold

**Question for you**: Should we require a minimum number of positions before someone counts as having a "career ladder"? (e.g., exclude people who went straight from 1 assistant job to head coach?)

I don't think so. As long as you've made two stops I think that's enough to make me interested in your career trajectory and make a coach relevant to our data.

```{r career-ladder}
# STUDENT DECISION: Set minimum number of positions
MIN_POSITIONS <- 1  # CHANGE THIS NUMBER (try 2, 3, or keep at 1)

# Sequence of positions before becoming head coach
career_sequences <- future_hc_positions |>
  filter(before_hc, division == "I") |>
  arrange(coach, start_year) |>
  group_by(coach) |>
  summarize(
    positions_held = list(position_title_standardized),
    n_positions = n(),
    final_position = last(position_title_standardized),
    .groups = "drop"
  ) |>
  filter(n_positions >= MIN_POSITIONS)  # APPLIES YOUR THRESHOLD

cat("Coaches meeting threshold:", nrow(career_sequences), "\n")

cat("\nMost common final position before becoming D1 head coach:\n")
career_sequences |>
  count(final_position, sort = TRUE) |>
  mutate(pct = n / sum(n) * 100) |>
  head(10)

# Average number of positions held before head coach role
cat("\n\nAverage D1 positions held before becoming head coach:",
    round(mean(career_sequences$n_positions, na.rm = TRUE), 1))
```

## Common Career Pathways

```{r pathways}
# STUDENT DECISION: How many positions should we examine?
PATHWAY_LENGTH <- 2  # CHANGE THIS (2, 3, 4, or 5)

cat("\n\nCommon", PATHWAY_LENGTH, "-position pathways to head coach:\n")
career_sequences |>
  filter(n_positions == PATHWAY_LENGTH) |>
  mutate(pathway = map_chr(positions_held, ~paste(.x, collapse = " â†’ "))) |>
  count(pathway, sort = TRUE) |>
  head(15) |>
  print(n = 15)
```

### ðŸ’¡ STORY IDEAS - Section 2

**Based on the career ladder data, brainstorm 2-3 story angles:**

1. Who became a head coach after being a strength and conditioning coach? What was/is the philosophy of their team as head coach? 
2. What does it mean to be "staff" at a school? I'm suprised to see that title frequently, is that the same thing as an assitant coach? Is there pay differences?
3. 

**Questions to consider:**
- Are there "fast track" coaches who skipped steps?
- Does the Associate Head Coach position matter, or do people jump from Assistant to Head?
- How important is the "Staff" level as a starting point?

---

# Analysis 3: Coaching Trees and Mentorship Networks

## DECISION POINT 4: Time Overlap Requirements

**Question for you**: How should we define "worked under"? Should we require they overlapped for at least one full year, or is any overlap sufficient?

I would like to see one full year, because that suggests that they were actually integrated into a staff and have significant experience working for a head coach.

```{r coaching-trees}
# STUDENT DECISION: Set minimum overlap threshold
MIN_OVERLAP_YEARS <- 1  # CHANGE THIS (0 = any overlap, 1, 2, 3 for stricter definition)

# Create edges: assistant coaches who worked under head coaches
coaching_relationships <- coaching |>
  filter(division == "I") |>
  select(coach, college_clean, position_title_standardized, start_year, end_year) |>
  # For each school/timeframe, find head coaches
  left_join(
    coaching |>
      filter(division == "I", position_title_standardized == "Head Coach") |>
      select(hc_name = coach, college_clean, 
             hc_start = start_year, hc_end = end_year),
    by = "college_clean",
    relationship = "many-to-many"
  ) |>
  # Keep only overlapping tenures (assistant worked under this head coach)
  filter(
    !is.na(hc_start),
    coach != hc_name,
    position_title_standardized %in% c("Assistant Coach", "Associate Head Coach"),
    # Check for time overlap
    start_year <= coalesce(hc_end, 2025),
    coalesce(end_year, 2025) >= hc_start
  ) |>
  # STUDENT DECISION: Add minimum overlap requirement
  mutate(
    overlap_years = pmin(coalesce(end_year, 2025), coalesce(hc_end, 2025)) - 
                    pmax(start_year, hc_start)
  ) |>
  filter(overlap_years >= MIN_OVERLAP_YEARS) |>  # APPLIES YOUR THRESHOLD
  distinct(coach, hc_name, college_clean)

cat("Coaching relationships identified:", nrow(coaching_relationships), "\n")
```

## Top Mentors

```{r mentors}
# Most prolific mentors (head coaches who produced assistants who became HCs)
prolific_mentors <- coaching_relationships |>
  filter(coach %in% d1_head_coaches) |>
  count(hc_name, sort = TRUE) |>
  rename(mentor = hc_name, proteges_who_became_hc = n)

cat("\nTop 20 mentors (head coaches whose assistants became D1 head coaches):\n")
print(prolific_mentors |> head(20), n = 20)
```

### ðŸ’¡ STORY IDEAS - Section 3

**Based on the coaching trees data, brainstorm 2-3 story angles:**

1. As a current Maryland beat writer I want to write the Brenda story right now. While widely respected by anyone who's close to WBB Brenda is often not put in the same category as the top tier head coaches (Staley, Mulkey, Geno). This might be fair, given that she only has one National Title, but clearly she is running a system that elevates those around her.
2. Kara Lawson has already produced five head coaches in five seasons at Duke. On her current trajectory, she's going to quickly become the best "mentor" in the game. Is this related to her NBA experience? The Duke brand?
3. It would be cool to do a story mixing this data with the coaches that have produced the best winning percentages after leaving. Which coaches not only produce a lot of other head coaches?    

**Questions to consider:**
- Who are the most prolific "mentor" coaches?
- Are there surprising names?
- Do certain coaches have "coaching trees" at multiple schools?
- Could you profile a specific coaching tree? Which one?

## DECISION POINT 5: Network Visualization Scope

**Question for you**: How many top mentors should we include in the visualization? Too many = cluttered, too few = missing important connections.

```{r network-visualization, fig.width=12, fig.height=10}
# STUDENT DECISION: Number of top mentors to visualize
N_MENTORS_TO_SHOW <- 15  # CHANGE THIS (try 10, 15, 20, or 25)

# Create network of top mentors (for visualization clarity)
top_mentors <- prolific_mentors |>
  head(N_MENTORS_TO_SHOW) |>
  pull(mentor)

network_edges <- coaching_relationships |>
  filter(
    hc_name %in% top_mentors,
    coach %in% d1_head_coaches
  ) |>
  select(from = hc_name, to = coach, school = college_clean)

# Build network graph
coaching_network <- as_tbl_graph(network_edges, directed = TRUE)

# Plot
ggraph(coaching_network, layout = 'fr') +
  geom_edge_link(aes(alpha = 0.3), arrow = arrow(length = unit(2, 'mm'))) +
  geom_node_point(size = 5, color = "steelblue") +
  geom_node_text(aes(label = name), repel = TRUE, size = 3) +
  theme_void() +
  labs(
    title = "Coaching Trees: Top Mentors and Their ProtÃ©gÃ©s",
    subtitle = paste("Top", N_MENTORS_TO_SHOW, "D1 head coaches who mentored future D1 head coaches")
  )
```

---

# Analysis 4: School-to-School Coaching Pipelines

```{r school-pipelines}
# Track coach movement between schools
coach_movements <- coaching |>
  filter(division == "I") |>
  arrange(coach, start_year) |>
  group_by(coach) |>
  mutate(
    next_school = lead(college_clean),
    next_position = lead(position_title_standardized),
    next_start = lead(start_year)
  ) |>
  filter(!is.na(next_school), college_clean != next_school) |>
  ungroup()

# Most common school-to-school transitions
cat("\nTop 30 school-to-school coaching pipelines:\n")
coach_movements |>
  count(college_clean, next_school, sort = TRUE) |>
  rename(from_school = college_clean, to_school = next_school, coaches = n) |>
  head(30) |>
  print(n = 30)
```

## Schools that Export to Head Coaching

```{r exports}
# Schools that "export" coaches to D1 head coaching jobs
coach_exports <- coach_movements |>
  filter(next_position == "Head Coach") |>
  count(college_clean, sort = TRUE) |>
  rename(school = college_clean, coaches_to_hc = n)

cat("\n\nTop 20 schools that export coaches to D1 head coaching positions:\n")
print(coach_exports |> head(20), n = 20)
```

### ðŸ’¡ STORY IDEAS - Section 4

**Based on school-to-school movement patterns, brainstorm 2-3 story angles:**

1. The most obvious one to me is a story on the Mississippi State to Texas pipeline. I know Schaefer left Miss. State for Texas, but seven is a ton of people to bring over. Does the relationship pre-date him? 
2. Why does Houston, Miami and VT produce assistants that are directly ready for head coaching? 
3. 

**Questions to consider:**
- Are there strong regional pipelines (e.g., schools from the same conference feeding each other)?
- Do assistant coaches at top programs tend to move to head coaching at mid-majors first?
- Are there unusual cross-country connections?
- Which schools are "feeders" vs. "destinations"?

---

# Analysis 5: Conference-Level Analysis

## DECISION POINT 6: Conference Focus

**Question for you**: Should we analyze all conferences equally, or focus on major/Power 5 conferences? Should we combine some smaller conferences?

I don't think it makes sense to group conferences for this category since I would want to know the standout vs. less prominent conferences among the mid-majors, among the power five and among thhe bottom-tier conferences. 

```{r conference-analysis}
# STUDENT DECISION: Define which conferences to highlight
# Option A: Analyze all conferences (current)
# Option B: Create a "Power 5" vs "Mid-Major" vs "Small" grouping
# Option C: Focus only on specific conferences

# Conferences producing future head coaches
conference_production <- future_hc_positions |>
  filter(before_hc, division == "I") |>
  count(conference, position_title_standardized) |>
  arrange(desc(n))

cat("\nTop conferences producing future D1 head coaches:\n")
conference_production |>
  group_by(conference) |>
  summarize(total = sum(n), .groups = "drop") |>
  arrange(desc(total)) |>
  head(15) |>
  print(n = 15)
```

## Conference Loyalty

```{r loyalty}
# Conference loyalty: coaches who stay within conference
conference_loyalty <- coach_movements |>
  left_join(
    coaching |> 
      filter(division == "I") |>
      select(coach, college_clean, conference),
    by = c("next_school" = "college_clean", "coach" = "coach"),
    relationship = "many-to-many"
  ) |>
  filter(!is.na(conference.x), !is.na(conference.y)) |>
  mutate(same_conference = conference.x == conference.y) |>
  group_by(conference.x) |>
  summarize(
    total_moves = n(),
    same_conference_moves = sum(same_conference),
    loyalty_rate = same_conference_moves / total_moves * 100,
    .groups = "drop"
  ) |>
  arrange(desc(loyalty_rate))

cat("\n\nConference retention rates (coaches staying within conference):\n")
print(conference_loyalty |> head(15), n = 15)
```

### ðŸ’¡ STORY IDEAS - Section 5

**Based on conference patterns, brainstorm 2-3 story angles:**

1. I would love to explore the SWAC being the conference with the highest loyalty rate by a significant margin? Is it because it's one of the worst conferences in the country? Is there something to it being an HBCU conference so coaches might feel slightly more at home where they are and encouraged to stay? The MEAC is lower down so doesn't fit that theory.
2. Are the conferences that aren't on the list not there because they don't have a single coach? It would be cool to do a story on a coach that could potentially be the first from his conference to move directly into a head coaching role.
3. On the opposite side of the spectrum of my first idea why do Ivy League coaches tend to leave the conference for their next job? Is it the lack of athletic scholarships and resources dedicated to sports? 

**Questions to consider:**
- Do certain conferences "develop" more coaches than others?
- Is there high loyalty within conferences, or do coaches move around?
- Are there conferences that import talent vs. export it?

---

# Analysis 6: Time to Head Coach Role

## DECISION POINT 7: Career Start Definition

**Question for you**: When calculating "time to head coach," should we count ALL positions (including high school, community college) or only college-level positions?

```{r time-to-hc}
# STUDENT DECISION: Filter on category
# Current: All positions included
# Alternative: Add filter like "category == 'College'" to exclude high school, etc.

time_to_hc <- coaching |>
  filter(coach %in% d1_head_coaches) |>
  # filter(category == "College") |>  # UNCOMMENT THIS LINE TO EXCLUDE NON-COLLEGE
  arrange(coach, start_year) |>
  group_by(coach) |>
  summarize(
    first_position_year = min(start_year, na.rm = TRUE),
    first_hc_year = min(start_year[position_title_standardized == "Head Coach" & 
                                     division == "I"], na.rm = TRUE),
    years_to_hc = first_hc_year - first_position_year,
    .groups = "drop"
  ) |>
  filter(is.finite(years_to_hc), years_to_hc >= 0)

cat("\nTime to D1 head coach position:\n")
cat("Mean:", round(mean(time_to_hc$years_to_hc, na.rm = TRUE), 1), "years\n")
cat("Median:", median(time_to_hc$years_to_hc, na.rm = TRUE), "years\n")
cat("Min:", min(time_to_hc$years_to_hc, na.rm = TRUE), "years\n")
cat("Max:", max(time_to_hc$years_to_hc, na.rm = TRUE), "years\n")

# Distribution
ggplot(time_to_hc, aes(x = years_to_hc)) +
  geom_histogram(binwidth = 2, fill = "steelblue", alpha = 0.7) +
  geom_vline(xintercept = median(time_to_hc$years_to_hc, na.rm = TRUE), 
             linetype = "dashed", color = "red", size = 1) +
  labs(
    title = "Years to First D1 Head Coaching Position",
    subtitle = "From first coaching role to D1 head coach",
    x = "Years",
    y = "Count of coaches"
  ) +
  theme_minimal()
```

### ðŸ’¡ STORY IDEAS - Section 6

**Based on career timeline data, brainstorm 2-3 story angles:**

1. Once again the outliers will make for interesting stories. Who are the coaches that went directly to a head coaching position, particularly from somewhere unexpected like D3 or something? Who are the coaches that worked for 40 years before getting their opportunity?
2. This would require a bit more data, but has this changed over time. Has it got longer with more of the same coaches being recycled or shorter with shorter leashes for coaches?
3. 

**Questions to consider:**
- What's the typical timeline to becoming a D1 head coach?
- Who are the outliers (very fast or very slow)?

---

# Analysis 7: Elite Program "Finishing Schools"

## DECISION POINT 8: Defining "Elite Programs"

**Question for you**: Which schools should count as "elite" or "blue blood" programs? 
This is subjective - modify the list based on your knowledge or research.

```{r finishing-schools}
# STUDENT DECISION: Modify this list of top programs
# Consider: recent success, historical success, resources, national profile

blue_blood <- c("UConn", "Tennessee", "Stanford", "Notre Dame", "Baylor",
                  "South Carolina", "LSU",  "Duke", "UCLA", "Maryland"
                 )
# ADD OR REMOVE SCHOOLS AS YOU SEE FIT

cat("Analyzing", length(blue_blood), "programs\n")

# Assistant coaches from top programs who became head coaches
finishing_school_analysis <- future_hc_positions |>
  filter(
    before_hc,
    division == "I",
    college_clean %in% blue_blood,
    position_title_standardized %in% c("Assistant Coach", "Associate Head Coach")
  ) |>
  group_by(college_clean) |>
  summarize(
    future_head_coaches = n_distinct(coach),
    .groups = "drop"
  ) |>
  arrange(desc(future_head_coaches))

cat("\n'Finishing schools' - top programs producing future head coaches:\n")
print(finishing_school_analysis, n = Inf)

# Average years spent at top program before becoming HC
years_at_top_programs <- future_hc_positions |>
  filter(
    before_hc,
    division == "I",
    college_clean %in% blue_blood,
    position_title_standardized %in% c("Assistant Coach", "Associate Head Coach")
  ) |>
  mutate(years_at_school = coalesce(end_year, 2025) - start_year) |>
  group_by(college_clean) |>
  summarize(
    avg_years = mean(years_at_school, na.rm = TRUE),
    .groups = "drop"
  ) |>
  arrange(desc(avg_years))

cat("\n\nAverage years spent at top programs (for future HCs):\n")
print(years_at_top_programs, n = Inf)
```

### ðŸ’¡ STORY IDEAS - Section 7

**Based on elite program patterns, brainstorm 2-3 story angles:**

1. Why doesn't Geno produce more head coaches? Could research some of the theories we talked about in class regarding who Geno chooses to hire etc.
2. What are the differences in who Mulkey's produced at LSU vs. Baylor? Is she hiring coaches who are closer to being ready for HC jobs?
3. 

**Questions to consider:**
- Do the biggest brand names produce the most head coaches?
- Are there "hidden gems" - programs that punch above their weight?
- Does time spent at elite programs matter (short stint vs. long apprenticeship)?
- Are there programs that hoard talent vs. those that develop and release it?

---

# Analysis 8: "Stepping Stone" Schools

```{r stepping-stones}
# Head coaches who left for another D1 head coaching job
stepping_stone_moves <- coaching |>
  filter(division == "I", position_title_standardized == "Head Coach") |>
  arrange(coach, start_year) |>
  group_by(coach) |>
  mutate(
    next_school = lead(college_clean),
    next_position = lead(position_title_standardized),
    moved_to_hc = next_position == "Head Coach" & !is.na(next_school)
  ) |>
  filter(moved_to_hc) |>
  ungroup()

cat("\nSchools most commonly serving as stepping stones (HC â†’ HC moves):\n")
stepping_stone_moves |>
  count(college_clean, sort = TRUE) |>
  rename(school = college_clean, hc_departures = n) |>
  head(20) |>
  print(n = 20)
```

```{r}
# Most common destination schools
cat("\n\nMost common destination schools for head coaches:\n")
stepping_stone_moves |>
  count(next_school, sort = TRUE) |>
  rename(destination = next_school, hc_arrivals = n) |>
  head(20) |>
  print(n = 20)
```

### ðŸ’¡ STORY IDEAS - Section 8

**Based on stepping stone patterns, brainstorm 2-3 story angles:**
1. Where is GW hiring from? Really low tier D1s? Are there factors that make it an attractive job?
2. What is the difference between a South Dakota and a George Washington. How much of it is location-based? 
3. 

**Questions to consider:**
- Which schools can't keep their successful head coaches?
- What makes a school a "destination" vs. a "stepping stone"?
- Are there schools that serve as consistent "first head coaching jobs"?
- Can you identify a "ladder" of schools (small to medium to major)?

---

# Analysis 9: Position Mobility Analysis

```{r position-mobility}
# Years spent in each position before moving up
position_duration <- coaching |>
  filter(division == "I") |>
  mutate(years_in_position = coalesce(end_year, 2025) - start_year) |>
  group_by(position_title_standardized) |>
  summarize(
    n_positions = n(),
    avg_duration = mean(years_in_position, na.rm = TRUE),
    median_duration = median(years_in_position, na.rm = TRUE),
    .groups = "drop"
  ) |>
  arrange(desc(n_positions))

cat("\nAverage years in each position type:\n")
print(position_duration, n = Inf)

# Promotion rates by position
promotions <- coaching |>
  filter(division == "I") |>
  arrange(coach, start_year) |>
  group_by(coach) |>
  mutate(
    next_position = lead(position_title_standardized),
    promoted = case_when(
      position_title_standardized == "Staff" & 
        next_position %in% c("Assistant Coach", "Associate Head Coach", "Head Coach") ~ TRUE,
      position_title_standardized == "Assistant Coach" & 
        next_position %in% c("Associate Head Coach", "Head Coach") ~ TRUE,
      position_title_standardized == "Associate Head Coach" & 
        next_position == "Head Coach" ~ TRUE,
      TRUE ~ FALSE
    )
  ) |>
  filter(!is.na(next_position)) |>
  group_by(position_title_standardized) |>
  summarize(
    total_moves = n(),
    promotions = sum(promoted),
    promotion_rate = promotions / total_moves * 100,
    .groups = "drop"
  ) |>
  arrange(desc(promotion_rate))

cat("\n\nPromotion rates by position:\n")
print(promotions, n = Inf)
```

### ðŸ’¡ STORY IDEAS - Section 9

**Based on mobility and promotion patterns, brainstorm 2-3 story angles:**

1. I return to my earlier staff idea. What's the coorrelation between the position and promotions? Why is that a designation?
2. I would like to know what's going on with interim head coaches? Is our data accurate have truly zero been promoted? I feel like previous data conflicted that. If it is it would be interesting to talk to some interim head coaches about why they thought they weren't promoted and if they ever had a chance. 
3. 

**Questions to consider:**
- Which positions are "dead ends" vs. "springboards"?
- Do people spend more time in certain positions?
- Is there a "right" amount of time to spend before moving up?

---

# FINAL REFLECTION: Your Best Story Ideas

Review all your story ideas from each section. Which 3 would you pursue as full stories?

**Story #1:**

What makes Frese the coach that has produced the most proteges.

**Why this story:**

This has to be my No. 1 choice, because I'm legitimately wanting to pitch it to my editors and ask Frese about it. Besides the fact that I'm bias toward it I think this is a data point that would legitimately suprise people which tend to be the best ones to write about.

**Story #2:**

Why doesn't Geno produce more head coaches?

**Why this story:**

I think most casual WBB fans would guess oh Geno will be number one. Regardless of the dynasty he's built, he has been the head coach for 40 years and I think anyone who's been around that long, you'd expect to have produced more than five head coaches.

I'd like to get to dive into the fact that he's not actually interested in hiring assistants with a ton of upward mobility and would rather find people who can fit into his system.

**Story #3:**

Vic Schaefer's friends and family staff

**Why this story:**

I want to know if he legitimately brought all seven of the connections and if so how many are they still there. Is there a rivalry? Does he have relatives on his staff, are there personal connections that go outside of basketball.

# Additional Analysis Ideas to Explore

Now that you've worked through these analyses, what other questions could this data answer?

**Your ideas:**

1. Some year-by-year comparisons would be interesting, which years have the most movement. Which years have an exceptional amount of mid-major stepping stones vs. assistants. 
2. As I suggested earlier a slight modification of the data could answer which coaches have then produced the head coaches that win the most? That could be limited to those that have produced at least five.
3. Which programs have the most staff continuity, long-term retention of coaches which have the least? Both nationally and within the power five.